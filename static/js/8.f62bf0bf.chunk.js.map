{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","views/notification/Notification.js","views/organisational-units/HardwareReviewsOu.js"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","_arrayLikeToArray","arr","len","length","i","arr2","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","isArray","F","s","e","_e","f","TypeError","normalCompletion","didErr","step","next","_e2","Notification","modal","setModal","notification","setNotification","hrefCondition","hrefLink","show","onClose","closeButton","xs","color","onClick","href","cookies","Cookies","token","get","user","OrganisationalUnits","props","getData","a","setState","loaded","getOus","getDivisions","fetch","method","headers","response","json","data","singleOu","find","ou","fault","divisionArray","state","divisions","division","fetchDivisionDetails","division_id","divDetails","push","id","ouAccess","ouId","userOus","ou_id","onFieldChange","event","newId","target","addDivision","body","JSON","stringify","feedback","handleResponse","res","message","newNotification","newModal","bind","style","textAlign","sm","xl","col","md","className","row","type","placeholder","onChange","map","_id","Component"],"mappings":"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","file":"static/js/8.f62bf0bf.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React from 'react';\nimport {\n  CButton,\n  CCardBody,\n  CCol,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CModalHeader,\n  CModalTitle\n} from \"@coreui/react\";\n\nconst Notification = ({modal, setModal, notification, setNotification, hrefCondition, hrefLink}) => {\n  return (\n    <>\n      <CModal show={modal} onClose={() => {\n        setModal(false)\n      }}>\n        <CModalHeader closeButton>\n          <CModalTitle>Edit Entry</CModalTitle>\n        </CModalHeader>\n        <CModalBody>\n          <CCol xs=\"12\">\n            <CCardBody>\n              {notification}\n            </CCardBody>\n          </CCol>\n        </CModalBody>\n        <CModalFooter>\n          <CButton\n            color=\"primary\"\n            onClick={() => {setModal(false); setNotification('');}}\n            href={hrefCondition ? hrefLink : \"#\"}\n          >Ok</CButton>\n        </CModalFooter>\n      </CModal>\n    </>\n  );\n};\n\nexport default Notification;\n","import React, {Component} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CFormGroup,\n  CInput,\n  CInputGroup,\n  CListGroup,\n  CListGroupItem,\n  CRow,\n  CInputGroupAppend\n} from \"@coreui/react\";\nimport Cookies from \"universal-cookie\";\nimport Notification from \"../notification/Notification\";\n\nconst cookies = new Cookies();\nconst token = cookies.get('auth-token');\nconst user = cookies.get('current-user');\n\nclass OrganisationalUnits extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ou: [],\n      divisions: [],\n      loaded: false,\n      fault: false,\n      newId: '',\n      notification: '',\n      modal: ''\n    }\n    this.setModal = this.setModal.bind(this);\n    this.setNotification = this.setNotification.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.getData();\n  }\n\n  getData = async () => {\n    this.setState({loaded: false});\n    await this.getOus();\n    await this.getDivisions();\n    this.setState({loaded: true});\n  }\n\n  getOus = async () => {\n    try {\n      const response = await fetch('https://stepbot-cooltech-internal-api.herokuapp.com/ous/find/all', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'auth-token': token\n        }\n      })\n      const data = await response.json();\n      const singleOu = data.find(ou => ou.name === 'Hardware Reviews');\n      this.setState({ou: singleOu});\n    } catch (err) {\n      this.setState({fault: true});\n    }\n  }\n\n  getDivisions = async () => {\n    let divisionArray = [];\n    const {ou} = this.state;\n    if (ou) {\n      for (const division of ou.divisions) {\n        const divDetails = await this.fetchDivisionDetails(division.division_id);\n        divisionArray.push(divDetails);\n      }\n      this.setState({divisions: divisionArray});\n    } else {\n      this.setState({fault: true});\n    }\n  }\n\n  fetchDivisionDetails = async (id) => {\n    try {\n      const response = await fetch(`https://stepbot-cooltech-internal-api.herokuapp.com/divisions/find/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'auth-token': token\n        }\n      })\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      this.setState({fault: true});\n    }\n  }\n\n  ouAccess = (ouId, user) => {\n    if (user) {\n      const userOus = user.ou;\n      for (const ou of userOus) {\n        if (ou.ou_id === ouId)\n          return true;\n      }\n    }\n    return false;\n  }\n\n  onFieldChange = (event) => {\n    this.setState({newId: event.target.value});\n  }\n\n  addDivision = async () => {\n    const response = await fetch(`https://stepbot-cooltech-internal-api.herokuapp.com/ous/add/division/60e705bed616322ba883c23b`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'auth-token': token\n      },\n      body: JSON.stringify({\n        division_id: this.state.newId\n      })\n    })\n    const feedback = await response.json();\n    this.handleResponse(feedback);\n  }\n\n  handleResponse = (res) => {\n    if (res.message)\n      this.setState({notification: res.message});\n  }\n\n  setNotification = (newNotification) => {\n    this.setState({notification: newNotification});\n  }\n\n  setModal = (newModal) => {\n    this.setState({modal: newModal});\n  }\n\n  render() {\n    const {divisions, loaded, fault, notification, modal} = this.state;\n\n    return (\n      <>\n        {(fault) ? <h1 style={{textAlign: \"center\"}}>Access denied.</h1> :\n          (this.ouAccess('60e705bed616322ba883c23b', user)) ?\n            (\n              <CRow>\n                <CCol sm=\"12\" xl=\"12\">\n                  <CCard>\n                    <CCardHeader>Divisions</CCardHeader>\n                    <CCol col=\"6\" sm=\"4\" md=\"6\" xl className=\"ml-xl-1 mt-1 mb-3 mb-xl-1 col-xl-4\">\n                      <CFormGroup row>\n                        <CInputGroup>\n                          <CInput\n                            type=\"text\"\n                            id=\"new-division-id\"\n                            name=\"new-division-id\"\n                            placeholder=\"Division ID\"\n                            onChange={this.onFieldChange}/>\n                          <CInputGroupAppend>\n                            <CButton\n                              type=\"button\"\n                              color=\"primary\"\n                              onClick={() => {\n                                this.addDivision();\n                                this.setState({modal: !modal})\n                              }}\n                            >Add division</CButton>\n                          </CInputGroupAppend>\n                        </CInputGroup>\n                      </CFormGroup>\n                    </CCol>\n                    <CCardBody>\n                      {loaded ?\n                        (\n                          <CListGroup>\n                            {divisions.map((division) => {\n                              const hrefLink = `#/divisions/${division._id}`;\n                              return (\n                                <CListGroupItem href={hrefLink}>\n                                  <p>ID: {division._id}</p>\n                                  <p>Name: {division.name}</p>\n                                </CListGroupItem>\n                              )\n                            })}\n                          </CListGroup>\n                        ) :\n                        <p>Loading...</p>\n                      }\n                    </CCardBody>\n                  </CCard>\n                </CCol>\n              </CRow>\n            ) : (\n              <h1 style={{textAlign: \"center\"}}>Access denied.</h1>\n            )\n        }\n        <Notification\n          modal={modal}\n          setModal={this.setModal}\n          notification={notification}\n          setNotification={this.setNotification}\n          hrefCondition={true}\n          hrefLink={'#'}/>\n      </>\n    );\n  }\n}\n\nexport default OrganisationalUnits;\n"],"sourceRoot":""}